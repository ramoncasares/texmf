% RCstyle.tex (20141204)

\catcode`\^^c2=13
\ifx\index\undefined \input index \fi

\catcode`\@=11
\let\utf=\relax
\let\utf@Ch=\relax
\let\stringate=\relax
\let\dohigh=\relax
\let\doaccents=\relax
\let\dosymbols=\relax
\let\deactivate=\relax
\def\stringaccents{\def\'{\string\'}\def\荏趄轭畿%
 \def\"{\string\"}\def\`{\string\`}\def\^{\string\^}}
\catcode`\@=12

\files

% Fonts

\ifx\loadfont\undefined \input fonts \fi
\xiifonts \xiititles \rm
\font\sf=cmss12
\font\sfit=cmssi12

\catcode`\@=11

\font\xiibb=msbm10 at12pt
\font\ixbb=msbm9
\font\vibb=msbm6
\newfam\bbfam % fam 8
\textfont\bbfam=\xiibb \scriptfont\bbfam=\ixbb
\scriptscriptfont\bbfam=\vibb
\def\bb{\fam\bbfam\xiibb}
%\mathchardef\beth="0869
\mathchardef\subsetneq="3828

\font\xiifrak=eufm10 at12pt
\font\ixfrak=eufm9
\newfam\frakfam \textfont\frakfam=\xiifrak \scriptfont\frakfam=\ixfrak
\def\frak{\fam\frakfam\xiifrak}

\mathcode`?="603F % ? works as punctuation
\def\ifmath$#1${\relax\ifmmode #1\else$#1$\fi}
\def\QED{\ifmath$\diamond$}

% Layout

\ifcase\pdfoutput\else
 \pdfcompresslevel=9
 \pdfdecimaldigits=4
 \pdfhorigin=1truein
 \pdfvorigin=1truein
 \pdfpageheight=297truemm
 \pdfpagewidth=210truemm
\fi
\hsize=15.92truecm \vsize=24.62truecm % DIN A4
\advance\vsize -30pt

\def\twodigits#1{\ifnum #1<10 0\fi \number#1}
\def\todayiso{\number\year \twodigits\month \twodigits\day}
\def\Folio{\ifnum\pageno<0
 \uppercase\expandafter{\romannumeral-\pageno}\else\number\pageno\fi}

\headline={\strut{\tt www.ramoncasares.com}\quad \todayiso \hfil
 \quad{\bf \jobname}\quad {\bf\Folio}}%
\def\makeheadline{\vbox to 30pt{\line{\the\headline}%
  \kern 1pt \hrule height 1pt\vfil}\nointerlineskip}
\nopagenumbers

% Sectioning

\newcount\secno
\newcount\ssecno
\newcount\thno
\newcount\parno
\let\presec=\empty

\parskip=0pt
\newdimen\oldparindent \oldparindent=20pt \parindent=0pt
\def\hang{\hangindent\oldparindent}

\def\numberedpars{\global\advance\parno1 %\dest
 \noindent\hbox to\oldparindent{{\xiiscriptsy\char123
  \xiiscriptrm\number\parno}\hfil$\cdot$\hfil}\ignorespaces}

\outer\def\section#1{\vskip0pt plus 84pt\penalty-500\vskip0pt plus-84pt
 \everypar{}\advance\secno1
 \ssecno=0 \thno=0 \parno=0
 \goodbreak\vskip 2pc plus 1pc
 \def\secid{\presec\the\secno}
 \noindent{\fonttwo\secid\ #1\dest\toc2{#1}\lbl{#1}{\secid}}\par
 \everypar{\numberedpars}}
\outer\def\xsection#1{\vskip0pt plus 84pt\penalty-500\vskip0pt plus-84pt
 \everypar{}\parno=0
 \goodbreak\vskip 2pc plus 1pc
 \def\secid{*}
 \noindent{\fonttwo#1\dest\toc8{#1}\lbl{#1}{\number\secno}}\par
 \everypar{\numberedpars}}

\outer\def\annex#1{\def\presec##1##2{#1}}

\outer\def\subsection#1{\vskip0pt plus 42pt\penalty-250\vskip0pt plus-42pt
 \everypar{}\advance\ssecno1
 \thno=0 \parno=0 \par\vskip 1pc plus6pt
 \def\secid{\presec\the\secno.\the\ssecno}%
 \noindent{\fontthree\secid\ #1\dest\toc3{#1}\lbl{#1}{\secid}}\par
 \everypar{\numberedpars}}
\outer\def\clause#1{\vskip0pt plus 24pt\penalty-150\vskip0pt plus-24pt
 \everypar{}\medskip\hang\noindent
 \advance\thno1 \def\secid{\presec\the\secno.\the\ssecno.\the\thno}%
 {\sc\secid\ #1}\quad\ignorespaces}
\outer\def\comment#1{\everypar{}\par
 \hang\noindent{\sc #1}\quad\ignorespaces}

\def\note#1{\vadjust{\vtop to0pt{\vss\rlap{#1}\kern-2pt\null}}}
%\def\note#1{\relax} % comment to write labels % uncomment to hide labels
\def\label#1{\note{\color{White}\xiiscriptrm #1\endcolor}%
 \dest\lbl{#1}{\secid}\ignorespaces}

% Openings

\def\title#1{\def\titledoc{#1}}
\def\author#1{\def\authordoc{#1}}
\def\keywords#1{\def\keywordsdoc{#1}}
\def\subject#1{\def\subjectdoc{#1}}

\def\beginnote{\insert\footins\bgroup\strut}
\def\endnote{\egroup}

\def\maketitle{\par
 \begingroup
 \def\'##1{\if##1o\string^^f3\else ##1\fi}% hack \'o -> f3
 \ifcase\pdfoutput
  \special{pdf: docinfo <<
    /Title (\titledoc) /Author (\authordoc)
    /Keywords (\keywordsdoc) /Subject (\subjectdoc) >>}\else
  \pdfinfo{/Title (\titledoc) /Author (\authordoc)
    /Keywords (\keywordsdoc) /Subject (\subjectdoc)}\fi
 \endgroup
 \null\vskip 3pc plus 4pc minus 1pc
 \def\secid{*}\dest\toc1{\titledoc}\lbl{\titledoc}{}
 \centerline{\fontzero\titledoc}
 \vskip 1pc plus 1pc
 \centerline{\fontone\authordoc}
 \vskip 2pc plus 1pc minus 1pc\relax}

\def\beginabstract{\begingroup \parindent=55pt\narrower \sl\parindent=20pt\noindent}
\def\endabstract{\par
 \ifx\keywordsdoc\undefined\else\smallskip\sfit\noindent Keywords: \keywordsdoc\par\fi
 \endgroup}


% References

\def\cite #1 (#2){\ref{#1#2}}

%% \cite Post (1944) -> Post (1944)
%% \cite *Post (1944) -> Post 1944
\def\chreference #1 (#2){\everypar{}\par
 \vskip0pt plus 2\baselineskip\penalty-43
 \vskip0pt plus-2\baselineskip
 \noindent\hangindent20pt\relax
 #1 (#2)\dest\lbl{#1#2}{#1\ (#2)}\lbl{*#1#2}{#1\ #2}}

\def\brreference #1 (#2){\everypar{}\par
 \vskip0pt plus 2\baselineskip\penalty-43
 \vskip0pt plus-2\baselineskip
 \noindent\hangindent20pt\relax
 [#1 #2]\dest\lbl{#1#2}{[#1 #2]}}

\let\reference=\chreference

\def\book#1{{\it#1\/}}
\def\periodical#1{{\it#1\/}}
\def\ISBN{{\sc isbn: }}

% Misc

\def\newline{\ifvmode\null\else\null\hfil\break\fi}
\let\\=\newline

\def\needspace#1{\vskip0pt plus #1\penalty-250\vskip0pt plus -#1\relax}

\def\definition#1{{\sl #1\/}}
\def\latin#1{{\it #1\/}}

\def\URL{\begingroup\catcode`\#=12\catcode`\_=12\relax\@RL}
\def\@RL#1<#2>{\def\1{#1}\ifx\1\empty\def\2{#2}\else\def\2{#1}\fi
\ifcase\pdfoutput
 \special{html:<a href=\string"#2\string">}{\color{Red}\2\endcolor}%
 \special{html:</a>}\else
 \pdfstartlink attr{/Border [0 0 0]}
  user{/Subtype /Link /A << /Type /Action
  /S /URI /URI (#2) >>}{\color{Red}\2\endcolor}\pdfendlink
\fi\endgroup}

\catcode`\@=12
